<!DOCTYPE html>
<html lang="id">
	<head>
		<meta charset="UTF-8">
		<title>Kalkulator Web Terbilang 12 Digit</title>
		<link rel="manifest" href="manifest.json">
		<style>
			body {
			font-family: Arial, sans-serif;
			text-align: center;
			margin-top: 50px;
			}
			.calculator {
			display: inline-block;
			border: 2px solid #333;
			padding: 20px;
			border-radius: 10px;
			background: #f9f9f9;
			max-width: 300px;
			}
			.display {
			width: 100%;
			height: 40px;
			font-size: 24px;
			margin-bottom: 10px;
			text-align: right;
			padding: 5px;
			border: 1px solid #ccc;
			}
			.buttons {
			display: grid;
			grid-template-columns: repeat(4, 60px);
			gap: 10px;
			}
			button {
			font-size: 18px;
			padding: 15px;
			cursor: pointer;
			}
			.terbilang {
			margin-top: 20px;
			font-style: italic;
			color: #555;
			text-align: left;
			}
			
			.top-button {
			display: flex;
			justify-content: flex-start;
			margin-bottom: 10px;
			}
			
			.clear {
			width: 60px;
			height: 60px;
			font-size: 18px;
			background: #f44336;
			color: white;
			border: none;
			cursor: pointer;
			border-radius: 5px;
			}
			
			.equals {
			background: #4CAF50;
			color: white;
			}
		</style>
	</head>
	<body>
		<div class="calculator">
			<input type="text" class="display" id="display" disabled>
			
			<!-- Tombol Clear di luar grid -->
			<div class="top-button">
				<button onclick="clearDisplay()" class="clear">C</button>
			</div>
			
			<!-- Grid tombol angka dan operator -->
			<div class="buttons">
				<button onclick="press('7')">7</button>
				<button onclick="press('8')">8</button>
				<button onclick="press('9')">9</button>
				<button onclick="press('/')">÷</button>
				<button onclick="press('4')">4</button>
				<button onclick="press('5')">5</button>
				<button onclick="press('6')">6</button>
				<button onclick="press('*')">×</button>
				<button onclick="press('1')">1</button>
				<button onclick="press('2')">2</button>
				<button onclick="press('3')">3</button>
				<button onclick="press('-')">−</button>
				<button onclick="press('0')">0</button>
				<button onclick="press('.')">.</button>
				<button onclick="calculate()" class="equals">=</button>
				<button onclick="press('+')">+</button>
			</div>
			
			<div class="terbilang" id="terbilang"></div>
		</div>
		
		<script>
			let display = document.getElementById('display');
			let terbilangDiv = document.getElementById('terbilang');
			
			function press(key) {
				if (display.value.length < 20) {
					display.value += key;
					//updateTerbilang(display.value);
				}
			}
			
			function clearDisplay() {
				display.value = '';
				terbilangDiv.innerText = '';
			}
			
			function calculate() {
				try {
					let result = eval(display.value);
					result = parseFloat(result.toFixed(12)); // Batasi ke 12 digit
					display.value = result;
					terbilangDiv.innerText = 'Terbilang: ' + terbilang(result);
					} catch {
					display.value = 'Error';
					terbilangDiv.innerText = '';
				}
			}
			
			
			function updateTerbilang(val) {
				try {
					let num = eval(val);
					num = parseFloat(num.toFixed(12));
					terbilangDiv.innerText = 'Terbilang: ' + terbilang(num);
					} catch {
					terbilangDiv.innerText = '';
				}
			}
			
			function terbilang(n) {
				const angka = ["", "satu", "dua", "tiga", "empat", "lima", "enam", "tujuh", "delapan", "sembilan"];
				const satuan = ["", "ribu", "juta", "miliar", "triliun"];
				
				function tigaDigit(num) {
					let str = "";
					let ratus = Math.floor(num / 100);
					let puluh = Math.floor((num % 100) / 10);
					let satu = num % 10;
					
					if (ratus > 0) {
						str += (ratus === 1 ? "seratus" : angka[ratus] + " ratus") + " ";
					}
					if (puluh > 1) {
						str += angka[puluh] + " puluh ";
						if (satu > 0) str += angka[satu] + " ";
						} else if (puluh === 1) {
						if (satu === 0) str += "sepuluh ";
						else if (satu === 1) str += "sebelas ";
						else str += angka[satu] + " belas ";
						} else {
						if (satu > 0) str += angka[satu] + " ";
					}
					return str.trim();
				}
				
				function bagianUtama(num) {
					let str = "";
					let i = 0;
					while (num > 0) {
						let bagian = num % 1000;
						if (bagian > 0) {
							let teks = tigaDigit(bagian);
							if (i === 1 && bagian === 1) {
								str = "seribu " + str;
								} else {
								str = teks + (satuan[i] ? " " + satuan[i] : "") + " " + str;
							}
						}
						num = Math.floor(num / 1000);
						i++;
					}
					return str.trim();
				}
				
				let isMinus = n < 0;
				n = Math.abs(n);
				let [bil, des] = n.toString().split(".");
				let hasil = bagianUtama(parseInt(bil));
				if (des && parseInt(des) > 0) {
					hasil += " koma";
					for (let d of des) {
						hasil += " " + angka[parseInt(d)];
					}
				}
				return (isMinus ? "minus " : "") + (hasil || "nol");
			}
			
		</script>
		<script>
			if ('serviceWorker' in navigator) {
				navigator.serviceWorker.register('sw.js')
				.then(() => console.log('Service Worker registered'));
			}
		</script>
	</body>
</html>